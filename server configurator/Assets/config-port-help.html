<div class="accordion" id="accordionExample">
    <div class="card">
        <div class="card-header" id="headingOne">
            <h4 class="mb-0">
                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                    Порт типа IN
                </button>
            </h4>
        </div>
        <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
            <div class="card-body">
                <p>Порт, сконфигурированный как IN (Вход) предназначен для работы с кнопками, выключателями, счетчиками импульсов, герконами, датчиками протечки, ИК-извещателями (датчиками движения), пожарными извещателеями (датчиками дыма) и другими датчиками, которые на выходе имеют два состояния: включено/выключено.</p>

                <p>После того, как порт сконфигурирован как <strong>IN</strong> (вход), на странице появляется несколько новых опций.</p>

                <p>
                    <strong>Action (Act)</strong> - действие, которое необходимо произвести, в случае, <strong>когда сервер не указан, не отвечает или HTTP-статус ответа отличный от "200 OK"</strong>.
                </p>

                <h4>
                    Action (сценарии)
                </h4>

                <p>
                    Формат поля Action следующий: <strong>X:Y;X:Y;X:Y</strong><br>
                    где, X - <strong>номер порта</strong>, а Y - <strong>действие/команда</strong>
                </p>

                <p>Возможные команды:</p>

                <ul>
                    <li>0 - <strong>выключить</strong>;</li>
                    <li>1 - <strong>включить</strong>;</li>
                    <li>2 - изменить состояние на противоположное <strong>(переключить)</strong>, т.е. если было включено выключить и наоборот</li>
                    <li>3 - прямая синхронизация выхода со входом (кнопка нажата - лампа включена; кнопка отпущена - лампа выключена)</li>
                    <li>4 - обратная синхронизация выхода со входов (кнопка нажата - лампа выключена; кнопка отпущена - лампа включена)</li>
                    <li>[0..255] - в случае с диммируемым портами, установить значение диммера (яркости света)</li>
                </ul>

                <h4>Паузы в сценариях</h4>

                <p>
                    В сценариях контроллер поддерживает работу с паузами.<br>
                    Например: <strong>7:1;p10;7:0</strong> (включить выход 7, подождать 1 секунду [единица 0,1с], выключить выход 7)
                </p>

                <h4>Повтор сценария</h4>

                <p>
                    Команда "<strong>r</strong>". <strong>Повтор записанного сценария несколько раз.</strong><br>
                    Пример сценария: 7:1;p5;7:0;p5;r4<br>
                    Включить порт 7; пауза 0,5с; выключить порт 7; пауза 0,5с; повторить все это с самого начала еще 4 раза<br>
                    Таким образом порт включится и выключится 5 раз.
                </p>

                <h4>
                    Управление всеми выходами
                </h4>

                <p>
                    Команда "<strong>a</strong>". <strong>Управление всеми выходами.</strong><br>
                    Например: a:0 (выключить все выходы), a:1 (включить все выходы)
                </p>

                <h4>
                    <br>
                    Синхронизация входа и выхода
                </h4>

                <p>
                    Если вход сконфигурирован как P&amp;R, то команда <strong>3</strong> - состояние выхода <strong>соответствует состоянию входа</strong>, команда <strong>4</strong> - состояние выхода <strong>противоположно состоянию входа</strong>.
                </p>

                <h4>Сетевые сценарии</h4>

                <p><strong>NetAction (Net)</strong> - В этом поле записывается URL, который MegaD-2561 вызывает независимо от того, есть сервер или его нет. Этот URL вызывается после попытки связи с сервером и после того, как отработает сценарий, описанный в поле Action. После IP-адреса можно указать порт. По умолчанию 80.</p>

                <strong>Флажок (чекбокс)</strong> справа от поля Net указывает, что NetAction будет вызван ТОЛЬКО при недоступности сервера (или когда HTTP-статус ответа отличен от 200). По умолчанию вызывается всегда.

                <h4>Режимы работы входа. Mode</h4>

                <p><strong>Mode</strong> - настройка, определяющая режим работы входа</p>

                <ul>
                    <li><strong>P</strong> - устройство реагирует (то есть отправляет сообщения на сервер, выполняет сценарии и т.д.) только при замыкании контакта/выключателя</li>
                    <li><strong>R</strong> - устройство реагирует только при размыкании контакта/выключателя. На сервер отправляется дополнительный параметр "m=1".</li>
                    <li><strong>P&amp;R</strong> - устройство реагирует как на замыкание, так и на размыкания контакта.</li>
                    <li><strong>С</strong> - Click Mode (обработка одинарных и двойных кликов/нажатий)</li>
                </ul>

                <p>
                    <strong>Флажок (чекбокс)</strong> справа от поля Mode указывает, что при наличии сервера, устройство отправляет на сервер сообщения всегда в режиме P&amp;R, а при его отсутствии Action выполняется только в том режиме, который установлен в Mode. <em>Данная опция не доступна для Click Mode.</em>
                </p>

                <h4>Режим Raw</h4>

                <p><strong>Raw</strong> - параметр отключает встроенную защиту от дребезга.</p>

                <h4>Режим Mute</h4>

                <p>
                    <strong>Mute</strong> - параметр отключает отправку информации на сервер о переключениях входа.<br>
                    Режим "Mute" позволяет индивидуально для конкретного порта отключить отправку информации о событиях на входе. В этом случае сервер самостоятельно опрашивает вход, получая значение счетчика, с нужной ему периодичностью.
                </p>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header" id="headingTwo">
            <h4 class="mb-0">
                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Порта типа OUT
                </button>
            </h4>
        </div>
        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
            <div class="card-body">
                <p>Порт, сконфигурированный как OUT (Выход) предназначен для управления различными приборами: лампами, нагревателями, клапанами, кранами, насосами, вентиляторами, двигателями, внешними реле/контакторами и любыми другими приборами.</p>

                <p>Ссылки <strong>ON</strong> и <strong>OFF</strong> позволяют управлять состоянием выхода: включить, выключить.</p>

                <p><strong>Default state (Def)</strong>: состояние порта после включения или перезагрузки устройства. В ряде случаев требуется, чтобы отдельные приборы по умолчанию были включены.</p>

                <h4>Режимы работы выхода</h4>

                <p><strong>Mode</strong>: режим работы выхода. <strong>SW</strong> - обычный ключ (ВКЛ, ВЫКЛ), <strong>PWM</strong> - ШИМ (широтно-импульсная модуляция), <strong>SW LINK</strong> - связанный порт, <strong>DS2413</strong> - двухканальный 1-wire модуль на базе микросхемы DS2413.</p>

                <ul>
                    <li>Режим <strong>SW</strong> (простое переключение) устанавливается для "релейных" или "симисторных" выходов модулей MegaD-8I7O и MegaD-14-R.</li>
                    <li>Режим <strong>PWM</strong> (ШИМ) предназначен для управления мощностью нагрузки, диммирования ламп, управления скоростью вращения вентилятора (для вентиляторов, способных управляться тиристорным регулятором) и других функций. PWM (ШИМ) доступен только на портах P10 (P25), P12 (P27) и P13 (P28).</li>
                    <li>Режим <strong>SW LINK</strong> (связанный порт) используется в тех случаях, когда необходимо предотвратить на аппаратном уровне включение двух или более портов одновременно. Данный режим предполагает, что если один из связанных портов включен, то любой другой включить уже нельзя. Для того, чтобы связать два или более портов, необходимо для каждого из них выбрать режим SW LINK и указать одинаковую группу в поле Group (любое число от 0 до 99).</li>
                    <li>Режим <strong>DS2413</strong> предназначен для управления внешним двухканальным модулем, работающим по протоколу 1-wire. Этот режим можно установить для любых цифровых портов.</li>
                </ul>

                <h4>Объединение выходов в группы</h4>

                <p><strong>Group</strong>: поле для объединения портов в группы. Можно указать любой номер группы (от 0 до 99). Используется в нескольких случаях.</p>

                <ul>
                    <li>В режиме SW Link. В этом случае порты, для которых указан одинаковый номер в поле Group можно включить только по одному. Одновременно включить несколько портов нельзя.</li>
                    <li>В обычном режиме SW использование групп позволяет управлять всей группой одной командой типа g7:1, где 7 - номер группы. Это позволяет сократить количество команд в сценариях.</li>
                </ul>

                <h4>Особенности работы выхода в режиме PWM</h4>

                <p>Когда выход настроен как PWM (ШИМ), появляется возможность задать значение от 0 до 255, соответствующее уровню выхода. 0 - нагрузка отключена, 255 - 100% мощности.</p>

                <h3><strong>Опция Freq</strong></h3>

                <p>
                    В ряде случае при управлении с помощью ШИМ-сигнала сторонним оборудованием возникает необходимость использовать более низкую или более высокую частоту ШИМ.<br>
                    Частоту для ШИМ-каналов можно настроить: (Norm - 3064Гц, Low - 383Гц, High - 24510Гц)
                </p>

                <blockquote>
                    <p>
                        <em>
                            Настройка частоты ШИМ, сделанная для одного порта, распространяется и на другие порты, связанные с этим же таймером.<br>
                            Аппаратные таймеры микроконтроллера и связанные с ними порты:
                        </em>
                    </p>

                    <ul>
                        <li><em>Таймер1: P10, P12, P13</em></li>
                        <li><em>Таймер3: P25, P27, P28</em></li>
                        <li><em>Таймер2: P11</em></li>
                    </ul>
                </blockquote>

                <h4>
                    <strong>Опция Smooth. Плавное диммирование</strong>
                </h4>

                <p>Опция Smooth позволяет воспользоваться аппаратной возможностью устройства плавно менять значение ШИМ. В поле задается скорость изменения. Значение 1 примерно равно 1 секунде при изменении значения от 0 до 255. Если указать в этом поле значение 180, то изменение от 0 до 255 будет происходить очень медленно в течение 3 минут.</p>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header" id="headingThree">
            <h4 class="mb-0">
                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Порт типа ADC(АЦП)
                </button>
            </h4>
        </div>
        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
            <div class="card-body">
                <p>Порт, сконфигурированный как ADC (АЦП) предназначен для работы с аналоговыми датчиками: датчики освещенности, газа, давления жидкости и т.д.</p>

                <p>Данный тип порта применяется для разъемов XP5, XP6, а также для входов исполнительного модуля MegaD-14-IOR (левое положение конфигурационного джампера) для портов с функцией АЦП (P0-P5). Выходное напряжение датчика не должно превышать 3,3В.</p>

                <p>В Web-интерфейсе отображается текущее значение, формируемое АЦП микроконтроллера в диапазоне от 0 до 1023. Это значение может быть считано и конвертировано в необходимые единицы измерения (согласно документации на конкретный датчик) сервером.</p>

                <p><strong>Mode</strong> - режим работы АЦП порта</p>

                <ul>
                    <li><strong>N (Norm)</strong>&nbsp; в этом режиме значения АЦП контроллером самостоятельно не проверяются, никакие действия устройство не предпринимает</li>
                    <li><strong>&gt;</strong> Порт считается активным, если значение больше заданного порога. Активностью считается момент перехода через пороговое значение</li>
                    <li><strong>&lt;</strong> Порт считается активным, если значение меньше заданного порога. Активностью считается момент перехода через пороговое значение</li>
                    <li><strong>&lt;&gt;</strong> Порт считается активным, если значение проходит порог как в меньшую, так и в большую сторону.</li>
                </ul>

                <p>
                    <strong>Val</strong> - Пороговое значение<br>
                    <strong>Hst</strong> - Гистерезис (допустимое отклонение от порогового значения в обе стороны)<br>
                    Параметры <strong>Action</strong> и <strong>NetAction</strong> и флажки (чекбоксы) полностью соответствуют тому, что описано для портов типа In (Вход). Action - сценарий по умолчанию, который выполняется устройством. NetAction - URL, который вызывается устройством.
                </p>

                <p>При проходе значения АЦП-порта через настроенный порог на сервер отправляется уведомление с данными:</p>

                <ul>
                    <li>v=299 - текущее значение АЦП-порта</li>
                    <li>dir=1 - направление перехода (снизу вверх - 1, сверху вниз - 0)</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header" id="heading5">
            <h4 class="mb-0">
                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
                    Порта типа DSen
                </button>
            </h4>
        </div>
        <div id="collapse5" class="collapse" aria-labelledby="heading5" data-parent="#accordionExample">
            <div class="card-body">
                <p>
                    Порт, сконфигурированный как DSen предназначен для работы с цифровыми датчиками и устройствами, работающими по цифровым шинам.<br>
                    Данный тип порта применяется для разъема XT2 контроллера MegaD-2561, а также для любых входов цифровых портов стандартных исполнительных модулей.
                </p>
            </div>
        </div>
    </div>
</div>